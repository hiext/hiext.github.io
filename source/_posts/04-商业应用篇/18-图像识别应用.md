# ç¬¬18ç« ï¼šå›¾åƒè¯†åˆ«åº”ç”¨

## ğŸ“ æœ¬ç« ç›®æ ‡
- æŒæ¡ç›®æ ‡æ£€æµ‹æŠ€æœ¯
- å­¦ä¹ äººè„¸è¯†åˆ«ç³»ç»Ÿ
- å®ç°OCRæ–‡å­—è¯†åˆ«
- å¼€å‘æ™ºèƒ½å®‰é˜²ç³»ç»Ÿ

## 18.1 ç›®æ ‡æ£€æµ‹(YOLO)

```python
import cv2
from ultralytics import YOLO

class ObjectDetector:
    def __init__(self, model_path='yolov8n.pt'):
        self.model = YOLO(model_path)
    
    def detect(self, image_path):
        results = self.model(image_path)
        
        detections = []
        for result in results:
            for box in result.boxes:
                detections.append({
                    'class': result.names[int(box.cls)],
                    'confidence': float(box.conf),
                    'bbox': box.xyxy[0].tolist()
                })
        
        return detections

# ä½¿ç”¨
detector = ObjectDetector()
results = detector.detect('image.jpg')
```

## 18.2 äººè„¸è¯†åˆ«

```python
import face_recognition
import cv2

class FaceRecognition:
    def __init__(self):
        self.known_faces = {}
    
    def add_face(self, name, image_path):
        """æ·»åŠ å·²çŸ¥äººè„¸"""
        image = face_recognition.load_image_file(image_path)
        encoding = face_recognition.face_encodings(image)[0]
        self.known_faces[name] = encoding
    
    def recognize(self, image_path):
        """è¯†åˆ«äººè„¸"""
        image = face_recognition.load_image_file(image_path)
        face_locations = face_recognition.face_locations(image)
        face_encodings = face_recognition.face_encodings(image, face_locations)
        
        results = []
        for encoding in face_encodings:
            matches = face_recognition.compare_faces(
                list(self.known_faces.values()),
                encoding
            )
            
            name = "Unknown"
            if True in matches:
                match_index = matches.index(True)
                name = list(self.known_faces.keys())[match_index]
            
            results.append(name)
        
        return results

# ä½¿ç”¨
fr = FaceRecognition()
fr.add_face("å¼ ä¸‰", "zhangsan.jpg")
names = fr.recognize("group_photo.jpg")
```

## 18.3 OCRæ–‡å­—è¯†åˆ«

```python
import easyocr

class OCRSystem:
    def __init__(self, languages=['ch_sim', 'en']):
        self.reader = easyocr.Reader(languages)
    
    def extract_text(self, image_path):
        """æå–æ–‡å­—"""
        results = self.reader.readtext(image_path)
        
        texts = []
        for (bbox, text, conf) in results:
            texts.append({
                'text': text,
                'confidence': conf,
                'bbox': bbox
            })
        
        return texts

# ä½¿ç”¨
ocr = OCRSystem()
texts = ocr.extract_text('document.jpg')
for item in texts:
    print(f"{item['text']} (ç½®ä¿¡åº¦: {item['confidence']:.2f})")
```

## 18.4 æ™ºèƒ½å®‰é˜²ç³»ç»Ÿ

```python
class SecuritySystem:
    def __init__(self):
        self.face_rec = FaceRecognition()
        self.detector = ObjectDetector()
        self.alert_threshold = 0.8
    
    def monitor(self, video_source=0):
        """å®æ—¶ç›‘æ§"""
        cap = cv2.VideoCapture(video_source)
        
        while True:
            ret, frame = cap.read()
            if not ret:
                break
            
            # äººè„¸è¯†åˆ«
            rgb_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
            face_locations = face_recognition.face_locations(rgb_frame)
            
            if face_locations:
                encodings = face_recognition.face_encodings(rgb_frame, face_locations)
                
                for encoding, location in zip(encodings, face_locations):
                    name = self._identify_face(encoding)
                    
                    if name == "Unknown":
                        self._trigger_alert("æ£€æµ‹åˆ°é™Œç”Ÿäºº")
                    
                    # ç»˜åˆ¶è¾¹æ¡†
                    top, right, bottom, left = location
                    cv2.rectangle(frame, (left, top), (right, bottom), (0, 255, 0), 2)
                    cv2.putText(frame, name, (left, top - 10), 
                               cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 2)
            
            cv2.imshow('Security Monitor', frame)
            
            if cv2.waitKey(1) & 0xFF == ord('q'):
                break
        
        cap.release()
        cv2.destroyAllWindows()
    
    def _identify_face(self, encoding):
        """è¯†åˆ«äººè„¸"""
        matches = face_recognition.compare_faces(
            list(self.face_rec.known_faces.values()),
            encoding
        )
        
        if True in matches:
            match_index = matches.index(True)
            return list(self.face_rec.known_faces.keys())[match_index]
        return "Unknown"
    
    def _trigger_alert(self, message):
        """è§¦å‘è­¦æŠ¥"""
        print(f"âš ï¸  è­¦æŠ¥: {message}")
        # è¿™é‡Œå¯ä»¥æ·»åŠ å‘é€é€šçŸ¥ã€ä¿å­˜å›¾ç‰‡ç­‰é€»è¾‘

# ä½¿ç”¨
system = SecuritySystem()
system.face_rec.add_face("å¼ ä¸‰", "authorized_person.jpg")
system.monitor()
```

## ğŸ“š æœ¬ç« å°ç»“
- âœ… YOLOç›®æ ‡æ£€æµ‹
- âœ… äººè„¸è¯†åˆ«ç³»ç»Ÿ
- âœ… OCRæ–‡å­—è¯†åˆ«
- âœ… æ™ºèƒ½å®‰é˜²åº”ç”¨
- âœ… å®æ—¶è§†é¢‘å¤„ç†

[â¬…ï¸ ä¸Šä¸€ç« ](./17-æ™ºèƒ½å®¢æœç³»ç»Ÿ.md) | [è¿”å›ç›®å½•](../README.md) | [ä¸‹ä¸€ç«  â¡ï¸](./19-é¢„æµ‹åˆ†æç³»ç»Ÿ.md)
